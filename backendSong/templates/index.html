<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrackGuessr</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="welcome-screen" class="screen">
        <div class="welcome-inner">
            <div class="welcome-mark">TG</div>
            <h1 class="welcome-title">TrackGuessr</h1>
            <p class="welcome-subtitle">A Spotify-powered track guessing game.</p>
            <p class="welcome-cta">Click to start</p>
        </div>
    </div>

    <div id="main-container">
        <header class="app-header">
            <div class="app-title-wrap">
                <div class="app-mark">TG</div>
                <div class="app-title-text">
                    <h1>TrackGuessr</h1>
                    <p class="app-subtitle">A Spotify-powered music quiz</p>
                </div>
            </div>

            <div class="app-controls">
                <button id="theme-toggle-btn" class="ghost-btn">Dark mode</button>

                <div id="auth-panel" class="auth-panel">
                    <button id="spotify-login-btn" class="primary-ghost-btn cta-spotify">
                        <span class="btn-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.57 14.62c-.19.31-.6.4-.91.21-2.5-1.53-5.64-1.87-9.33-1.01-.36.08-.72-.14-.8-.5-.08-.36.14-.72.5-.8 3.99-.93 7.45-.54 10.19 1.17.31.19.4.6.21.91zm1.3-2.88c-.24.39-.75.51-1.14.27-2.87-1.77-7.24-2.28-10.62-1.25-.44.13-.9-.12-1.03-.56-.13-.44.12-.9.56-1.03 3.86-1.17 8.66-.6 11.94 1.41.39.24.51.75.27 1.14zm.11-3.01c-3.43-2.04-9.1-2.23-12.38-1.23-.52.16-1.07-.13-1.23-.65-.16-.52.13-1.07.65-1.23 3.76-1.14 10.02-.93 13.98 1.43.46.27.61.87.34 1.33-.27.46-.87.61-1.33.34z"/>
                            </svg>
                        </span>
                        Login with Spotify
                    </button>
                    <button id="spotify-logout-btn" class="secondary-ghost-btn" style="display:none;">Logout</button>

                    <div id="user-info" class="user-info" style="display:none;">
                        <img id="user-avatar"
                             src=""
                             alt="profile"
                             class="user-avatar" />
                        <div class="user-text">
                            <span class="user-label">Signed in as</span>
                            <span id="user-name" class="user-name"></span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <section id="genre-selection" class="panel panel-selection screen">
            <div class="selection-header">
                <h2>Choose a mode</h2>
                <p class="selection-subtitle">
                    Log in with Spotify, then guess tracks from your top songs or the world's biggest hits.
                </p>
            </div>

            <div id="genre-buttons-container" class="mode-grid">
                <button class="mode-card genre-btn" data-mode="top">
                    <div class="mode-card-inner">
                        <div class="mode-icon-wrap">
                            <span class="mode-icon">Top</span>
                        </div>
                        <div class="mode-text">
                            <h3>Your Top Tracks</h3>
                            <p>Guess songs based on what you actually listen to.</p>
                        </div>
                        <div class="mode-footer">
                            <span class="mode-tag">Personalized</span>
                            <span class="mode-highscore" id="highscore-top">Best: 0 pts</span>
                        </div>
                    </div>
                </button>

                <button class="mode-card genre-btn" data-mode="global">
                    <div class="mode-card-inner">
                        <div class="mode-icon-wrap">
                            <span class="mode-icon">Global</span>
                        </div>
                        <div class="mode-text">
                            <h3>Global Hits</h3>
                            <p>Test yourself on today's biggest chart-toppers.</p>
                        </div>
                        <div class="mode-footer">
                            <span class="mode-tag mode-tag-alt">Trending</span>
                            <span class="mode-highscore" id="highscore-global">Best: 0 pts</span>
                        </div>
                    </div>
                </button>
            </div>

            <section class="leaderboard-panel">
                <div class="leaderboard-header">
                    <h3>Local Leaderboard</h3>
                    <span class="leaderboard-caption">Top 10 scores on this device</span>
                </div>
                <ul id="leaderboard-list" class="leaderboard-list"></ul>
            </section>

            <p class="tiny-note">
                Tip: Use headphones for the best experience.
            </p>
        </section>

        <section id="game-area" class="panel panel-game screen is-hidden is-gone" style="display:none;" aria-hidden="true">
            <div id="loading-panel" class="loading-panel is-hidden" aria-live="polite">
                <p class="loading-title">Loading quiz</p>
                <div class="loading-bar">
                    <div id="loading-progress" class="loading-progress"></div>
                </div>
                <p class="loading-subtitle">Warming up your track list...</p>
            </div>

            <div id="game-content" class="game-content">
                <div class="game-top-row">
                    <p id="score" class="score-pill">Score: 0</p>
                    <p id="streak" class="streak-pill">Streak: 0</p>
                    <button id="back-to-menu-btn" class="link-btn">Back to modes</button>
                </div>

                <div class="game-layout">
                    <div class="game-left">
                        <div id="song-info" class="song-info">
                            <div class="artwork-frame">
                                <img id="song-image"
                                     src=""
                                     alt="cover"
                                     class="song-image" />
                                <div class="artwork-overlay">
                                    <button id="play-audio-btn" class="play-circle-btn">Play</button>
                                </div>
                            </div>

                            <div id="song-meta" class="song-meta">
                                <p id="song-title" class="song-title"></p>
                                <p id="song-artist" class="song-artist"></p>
                            </div>
                        </div>

                        <p class="game-instruction">
                            Listen to the snippet, then pick the correct track title.
                        </p>

                        <p id="feedback" class="feedback-text"></p>
                    </div>

                    <div class="game-right">
                        <div id="options-container" class="options-grid"></div>

                        <button id="next-song-btn" class="primary-btn" style="display:none;margin-top:1.5rem;">
                            Next track
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <audio id="audio-player"></audio>

    <script src="/static/game.js"></script>
</body>
</html>
